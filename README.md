# ContractsAgents

## 项目简介
输入加密货币代码或合约地址，由多个分析师角色（市场分析师、社交分析师、新闻分析师等）分别从不同角度分析，最终生成综合合约购买建议。支持实时分析和定时任务，可通过邮件发送分析报告。所有分析均由DeepSeek大模型自动生成。

## 核心功能
- 多角色分析师系统：13种专业分析师角色从不同维度提供分析
- 实时价格获取：集成CoinGecko API获取最新市场数据
- 技术指标分析：通过TAAPI获取MACD等技术指标
- 定时任务：支持每日多时段自动分析并发送邮件报告
- 多代币批量分析：可同时分析多个加密货币

## 项目结构
```
├── .env              # 环境变量配置文件
├── README.md         # 项目说明文档
├── main.py           # 主程序入口（手动分析）
├── scheduler.py      # 定时任务调度器（自动分析+邮件发送）
├── analysts.py       # 分析师角色定义和分析逻辑
├── taapi_client.py   # TAAPI技术指标客户端
├── test_price.py     # 价格获取功能测试
└── requirements.txt  # 项目依赖
```

## 使用方法

### 1. 安装依赖
```
pip install -r requirements.txt
```

### 2. 配置环境变量
在项目根目录创建`.env`文件，配置以下变量：
# 创建虚拟环境
python3 -m venv Agents
# 激活虚拟环境
source Agents/bin/activate
# 安装依赖
pip install -r requirements.txt
```
# DeepSeek API配置
DEEPSEEK_API_KEY=你的API密钥
DEEPSEEK_API_URL=https://api.deepseek.com/v1/chat/completions

# 第三方API配置
TAAPI_SECRET=你的TAAPI密钥
COINGECKO_API_URL=https://api.coingecko.com/api/v3
BINANCE_API_URL=https://api.binance.com/api/v3
ARKHAM_API_URL=https://api.arkhamintelligence.com
ALTERNATIVE_ME_API_URL=https://api.alternative.me

# 邮件配置（用于定时报告）
SMTP_SERVER=smtp.example.com
SMTP_PORT=465
SENDER_EMAIL=你的邮箱
SENDER_PASSWORD=你的邮箱密码
RECIPIENT_EMAIL=接收报告的邮箱

# 分析配置
ANALYSIS_TOKENS=BTC,ETH,SOL,ADA  # 需要分析的加密货币代码
```

### 3. 运行方式

#### 3.1 手动分析（单次）
```
python main.py
```
按提示输入加密货币代码或合约地址，查看实时分析结果。

#### 3.2 定时任务（自动分析+邮件报告）
```
python scheduler.py
```
程序将按预定时间（默认每天0/4/8/12/16/20点）自动分析配置的代币，并发送邮件报告。

## 测试价格获取功能
```
python test_price.py
```
验证价格获取功能是否正常工作。

## 后续开发计划
- 为每个分析师角色补充自定义提示词
- 支持Web界面或批量分析
- 支持多模型切换
- 添加更多技术指标和分析维度


结果展示
最终合约购买方案： 

【BTC 分析报告】
1. 建议做多买入价格：116,500.0000 USD（挂单策略） 
2. 做多止盈价格：122,000.0000 USD 
3. 做多止损价格：115,000.0000 USD 
4. 做多预期收益比例：+4.72% 
5. 做多最大亏损比例：-1.29% 
6. 建议做空买入价格：118,500.0000 USD（现价策略） 
7. 做空止盈价格：115,000.0000 USD 
8. 做空止损价格：120,000.0000 USD 
9. 做空预期收益比例：+2.95% 
10. 做空最大亏损比例：-1.27% 
11. 理由：多头突破118,000后目标120,000-122,000，空头需跌破115,000确认下行；做多为回调挂单，做空为现价试探。


【ETH 分析报告】
1. 建议做多买入价格：3,750.0000 USD（挂单） 
2. 做多止盈价格：3,850.0000 USD 
3. 做多止损价格：3,650.0000 USD 
4. 做多预期收益比例：+2.67% 
5. 做多最大亏损比例：-2.67% 
6. 建议做空买入价格：3,800.0000 USD（挂单） 
7. 做空止盈价格：3,700.0000 USD 
8. 做空止损价格：3,900.0000 USD 
9. 做空预期收益比例：+2.63% 
10. 做空最大亏损比例：-2.63% 
11. 理由：关键支撑3,750 USD与阻力3,850 USD，挂单策略。


【SOL 分析报告】
1. 建议做多买入价格：180.50 USD（挂单策略） 
2. 做多止盈价格：195.00 USD 
3. 做多止损价格：175.00 USD 
4. 做多预期收益比例：+8.03% 
5. 做多最大亏损比例：-3.05% 
6. 建议做空买入价格：185.00 USD（现价策略） 
7. 做空止盈价格：170.00 USD 
8. 做空止损价格：190.00 USD 
9. 做空预期收益比例：+8.11% 
10. 做空最大亏损比例：-2.70% 
11. 理由：结合支撑位180 USD和阻力位190 USD，挂单做多180.50 USD，现价做空185.00 USD。策略类型：挂单/现价。


【DOGE 分析报告】
1. 建议做多买入价格：0.2200 USD（挂单策略） 
2. 做多止盈价格：0.2500 USD 
3. 做多止损价格：0.2000 USD 
4. 做多预期收益比例：+13.64% 
5. 做多最大亏损比例：-9.09% 
6. 建议做空买入价格：0.2300 USD（现价） 
7. 做空止盈价格：0.2000 USD 
8. 做空止损价格：0.2500 USD 
9. 做空预期收益比例：+13.04% 
10. 做空最大亏损比例：-8.70% 
11. 理由：关键区间0.20-0.25 USD，挂单做多等待回调，现价做空博弈阻力位。策略类型：挂单/现价。
注：本建议基于2025年7月29日数据，需动态调整。加密货币风险极高，请根据自身承受能力决策。